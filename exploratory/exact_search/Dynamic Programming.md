# Dynamic Programming: 動的計画法

**動的計画法（Dynamic Programming, DP）**は、最適化問題を部分問題に分解し、部分問題の最適解を再利用することで、全体の最適解を効率的に求める厳密探索手法です。重複する部分問題を一度だけ計算することで、計算量を大幅に削減します。

---

### 1. 基本的なアイデア

**最適性の原理**:
- **部分問題の最適性**: 全体の最適解は、部分問題の最適解から構成される
- **重複部分問題**: 同じ部分問題が複数回出現する
- **メモ化**: 計算済みの部分問題の結果を保存して再利用

---

### 2. アルゴリズムの流れ

```
1. 問題を部分問題に分解
2. 部分問題の最適解を再帰的に計算:
   a. 既に計算済みなら、保存された結果を返す（メモ化）
   b. そうでなければ、再帰的に計算して保存
3. 部分問題の最適解から全体の最適解を構築
4. 最適解を返す
```

---

### 3. 数式による定式化

#### 3.1 最適性の原理

最適化問題：
\[
\min_{x \in \mathcal{X}} f(x)
\]

部分問題の最適解 \(f^*(i)\) が、全体の最適解 \(f^*(n)\) の構成要素：
\[
f^*(n) = \min_{i} \{ f^*(i) + c(i, n) \}
\]

#### 3.2 再帰関係

動的計画法の再帰関係：
\[
f^*(i) = \begin{cases}
\text{base case} & \text{if } i \text{ is terminal} \\
\min_{j \in \text{next}(i)} \{ f^*(j) + c(i, j) \} & \text{otherwise}
\end{cases}
\]

#### 3.3 メモ化

計算済みの結果を保存：
\[
\text{mem}[i] = f^*(i)
\]

---

### 4. XAIへの応用

#### 4.1 特徴選択

**問題**: どの特徴が予測に重要かを見つける

**Dynamic Programmingの適用**:
- **部分問題**: 特徴の部分集合の最適解
- **再帰関係**: 特徴を追加したときの最適解
- **目的**: 最適な特徴集合を見つける

#### 4.2 説明の構築

**問題**: 最適な説明を段階的に構築する

**Dynamic Programmingの適用**:
- **部分問題**: 説明の部分的な構築
- **再帰関係**: 説明要素を追加したときの最適解
- **目的**: 最適な説明を構築

#### 4.3 ルール抽出

**問題**: 最適なルールセットを構築する

**Dynamic Programmingの適用**:
- **部分問題**: ルールの部分集合の最適解
- **再帰関係**: ルールを追加したときの最適解
- **目的**: 最適なルールセットを見つける

---

### 5. 利点と欠点

**利点**:
- 最適解が保証される
- 重複計算を避けることで効率的
- 実装が比較的簡単

**欠点**:
- 問題構造に依存（最適部分構造が必要）
- メモリ使用量が大きい場合がある
- すべての問題に適用できるわけではない

---

### 6. 実装上の注意点

- **最適部分構造**: 問題が最適部分構造を持つ必要がある
- **メモ化**: 計算済みの結果を効率的に保存
- **ボトムアップ vs トップダウン**: 実装方法の選択
- **状態空間**: 状態の表現方法が重要

---

### 7. バリエーション

- **標準DP**: 上記の基本アルゴリズム
- **メモ化再帰**: トップダウンアプローチ
- **テーブルDP**: ボトムアップアプローチ
- **区間DP**: 区間を分割する問題

---

### 8. 参考文献

- Bellman, R. (1957). *Dynamic Programming*. Princeton University Press.
- Cormen, T. H., Leiserson, C. E., Rivest, R. L., & Stein, C. (2009). *Introduction to Algorithms* (3rd ed.). MIT Press.

---

### 9. まとめ

動的計画法は、最適解を保証する効率的な厳密探索手法です。XAIにおいては、特徴選択、説明の構築、ルール抽出などに応用されています。重複計算を避けることで、計算量を大幅に削減できるため、実用的な手法として広く使われています。

