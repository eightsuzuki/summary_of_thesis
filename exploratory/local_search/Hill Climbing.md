# Hill Climbing: 山登り法

**山登り法（Hill Climbing）**は、現在の解の近傍からより良い解を選択し、改善がなくなるまで繰り返す局所探索手法です。シンプルで実装が容易ですが、局所最適解に陥りやすいという特徴があります。

---

### 1. 基本的なアイデア

**山登りのメタファー**:
- **現在位置**: 現在の解
- **近傍**: 現在の解から1ステップで到達できる解
- **上り坂**: より良い解（目的関数値が大きい/小さい）
- **頂上**: 局所最適解

---

### 2. アルゴリズムの流れ

```
1. 初期解 x を生成
2. 終了条件を満たすまで繰り返し:
   a. 現在の解 x の近傍 N(x) を生成
   b. 近傍から最良の解 x' を選択
   c. f(x') > f(x) なら x ← x'
   d. 改善がなければ終了
3. 最良解 x を返す
```

---

### 3. 数式による定式化

#### 3.1 近傍の定義

現在の解 \(x\) の近傍：
\[
\mathcal{N}(x) = \{x' : d(x, x') \leq k\}
\]

ここで、\(d(x, x')\) は解間の距離、\(k\) は近傍のサイズ。

#### 3.2 解の選択

近傍から最良の解を選択：
\[
x' = \arg\max_{x'' \in \mathcal{N}(x)} f(x'')
\]

#### 3.3 更新条件

改善がある場合のみ更新：
\[
x \leftarrow \begin{cases}
x' & \text{if } f(x') > f(x) \\
x & \text{otherwise}
\end{cases}
\]

---

### 4. XAIへの応用

#### 4.1 特徴選択

**問題**: どの特徴が予測に重要かを見つける

**Hill Climbingの適用**:
- **解**: 特徴の選択パターン
- **近傍**: 特徴の追加・削除・交換
- **目的関数**: 選択された特徴でのモデル性能
- **目的**: 局所的に最適な特徴集合を見つける

#### 4.2 説明の最適化

**問題**: 最適な説明を生成する

**Hill Climbingの適用**:
- **解**: 説明の候補（特徴の重み、ルールなど）
- **近傍**: 説明の微調整
- **目的関数**: 説明の品質（忠実度、簡潔性）
- **目的**: 局所的に最適な説明を見つける

#### 4.3 ルール抽出

**問題**: 最適なルールセットを見つける

**Hill Climbingの適用**:
- **解**: ルールセット
- **近傍**: ルールの追加・削除・修正
- **目的関数**: ルールの精度と簡潔性
- **目的**: 局所的に最適なルールセットを見つける

---

### 5. 利点と欠点

**利点**:
- 実装が非常に簡単
- 計算コストが低い
- メモリ使用量が少ない
- 理解しやすい

**欠点**:
- 局所最適解に陥りやすい
- 初期解に依存する
- プラトー（平らな領域）で停滞する可能性がある
- 最適解の保証がない

---

### 6. 実装上の注意点

- **近傍の定義**: 問題に応じて適切に定義する
- **初期解**: 複数の初期解から開始（多スタート）
- **終了条件**: 改善がなくなる、または最大反復回数
- **プラトー処理**: 同じ値の解を許容するかどうか

---

### 7. バリエーション

- **標準Hill Climbing**: 上記の基本アルゴリズム
- **最急上昇法（Steepest Ascent）**: 最良の近傍を選択
- **確率的Hill Climbing**: ランダムに近傍を選択
- **多スタートHill Climbing**: 複数の初期解から開始
- **ランダム再スタート**: 局所最適解に到達したら再スタート

---

### 8. 参考文献

- Russell, S., & Norvig, P. (2009). *Artificial Intelligence: A Modern Approach* (3rd ed.). Prentice Hall.
- Mitchell, M. (1998). *An Introduction to Genetic Algorithms*. MIT Press.

---

### 9. まとめ

山登り法は、シンプルで実装が容易な局所探索手法です。XAIにおいては、特徴選択、説明の最適化、ルール抽出などに応用されています。局所最適解に陥りやすいという欠点がありますが、実装の簡単さから広く使われています。

